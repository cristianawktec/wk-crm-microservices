import{d as _,a as k,l as B,c as r,e as t,t as d,g as O,F as c,x as p,r as b,C,o as l,p as g,h as V}from"./index-9430d62f.js";const A={class:"mb-8"},D={class:"text-3xl font-bold text-gray-900"},M={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},j={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},S={class:"bg-white rounded-xl shadow-sm p-6 border-l-4 border-indigo-500"},z={class:"flex items-center justify-between"},L={class:"text-3xl font-bold text-gray-900 mt-2"},P={class:"bg-white rounded-xl shadow-sm p-6 border-l-4 border-green-500"},R={class:"flex items-center justify-between"},T={class:"text-3xl font-bold text-gray-900 mt-2"},F={class:"bg-white rounded-xl shadow-sm p-6 border-l-4 border-blue-500"},N={class:"flex items-center justify-between"},E={class:"text-3xl font-bold text-gray-900 mt-2"},H={class:"bg-white rounded-xl shadow-sm p-6 border-l-4 border-yellow-500"},I={class:"flex items-center justify-between"},q={class:"text-3xl font-bold text-gray-900 mt-2"},G={class:"bg-white rounded-xl shadow-sm p-6"},J={key:0,class:"space-y-4"},K={key:1,class:"space-y-4"},Q={class:"flex-1"},U={class:"font-semibold text-gray-900"},W={key:0,class:"text-sm text-gray-600 mt-1"},X={class:"text-xs text-gray-500 mt-2"},Y={key:2,class:"text-center py-8 text-gray-500"},tt=_({__name:"DashboardView",setup(Z){const m=k(),u=b(!0),n=b({totalOpportunities:0,totalValue:0,openOpportunities:0,wonOpportunities:0,avgProbability:0,recentActivity:[]}),v=async()=>{var o;try{console.log("ðŸ“Š Fetching dashboard stats..."),console.log("Token being used:",(o=m.token)==null?void 0:o.substring(0,20));const e=await C.getDashboardStats();console.log("ðŸ“¦ Dashboard response:",e);const i=(e.data.recentActivity||[]).map(a=>({...a,created_at:a.created_at||a.timestamp||a.date||a.updated_at||new Date().toISOString()}));n.value={totalOpportunities:e.data.totalOpportunities||0,totalValue:e.data.totalValue||0,openOpportunities:e.data.openOpportunities||0,wonOpportunities:e.data.wonOpportunities||0,avgProbability:e.data.avgProbability||0,recentActivity:i},console.log("âœ… Dashboard stats loaded:",n.value)}catch(e){console.error("âŒ Erro ao carregar dashboard:",e.message)}finally{u.value=!1}},y=o=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(o),x=o=>{const e=new Date(o);return e.toLocaleDateString("pt-BR",{day:"2-digit",month:"short",year:"numeric"})+" Ã s "+e.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})},h=o=>({opportunity:"border-blue-500",update:"border-yellow-500",completed:"border-green-500"})[o]||"border-gray-300",w=o=>({opportunity:"bg-blue-100",update:"bg-yellow-100",completed:"bg-green-100"})[o]||"bg-gray-100",f=o=>({opportunity:"text-blue-600",update:"text-yellow-600",completed:"text-green-600"})[o]||"text-gray-600";return B(()=>{v()}),(o,e)=>{var i,a;return l(),r("div",null,[t("div",A,[t("h1",D,"OlÃ¡, "+d((a=(i=O(m).user)==null?void 0:i.name)==null?void 0:a.split(" ")[0])+"! ðŸ‘‹",1),e[0]||(e[0]=t("p",{class:"text-gray-600 mt-2"},"Bem-vindo ao seu painel de gerenciamento",-1))]),u.value?(l(),r("div",M,[(l(),r(c,null,p(4,s=>t("div",{key:s,class:"bg-white rounded-xl shadow-sm p-6 animate-pulse"},[...e[1]||(e[1]=[t("div",{class:"h-4 bg-gray-200 rounded w-3/4 mb-4"},null,-1),t("div",{class:"h-8 bg-gray-200 rounded w-1/2"},null,-1)])])),64))])):(l(),r("div",j,[t("div",S,[t("div",z,[t("div",null,[e[2]||(e[2]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Oportunidades",-1)),t("p",L,d(n.value.totalOpportunities),1)]),e[3]||(e[3]=t("div",{class:"p-3 bg-indigo-100 rounded-lg"},[t("svg",{class:"w-8 h-8 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1))])]),t("div",P,[t("div",R,[t("div",null,[e[4]||(e[4]=t("p",{class:"text-sm font-medium text-gray-600"},"Valor Total",-1)),t("p",T,d(y(n.value.totalValue)),1)]),e[5]||(e[5]=t("div",{class:"p-3 bg-green-100 rounded-lg"},[t("svg",{class:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])]),t("div",F,[t("div",N,[t("div",null,[e[6]||(e[6]=t("p",{class:"text-sm font-medium text-gray-600"},"Abertas",-1)),t("p",E,d(n.value.openOpportunities),1)]),e[7]||(e[7]=t("div",{class:"p-3 bg-blue-100 rounded-lg"},[t("svg",{class:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1))])]),t("div",H,[t("div",I,[t("div",null,[e[8]||(e[8]=t("p",{class:"text-sm font-medium text-gray-600"},"Prob. MÃ©dia",-1)),t("p",q,d(n.value.avgProbability)+"%",1)]),e[9]||(e[9]=t("div",{class:"p-3 bg-yellow-100 rounded-lg"},[t("svg",{class:"w-8 h-8 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})])],-1))])])])),t("div",G,[e[12]||(e[12]=t("h2",{class:"text-xl font-bold text-gray-900 mb-4"},"Atividades Recentes",-1)),u.value?(l(),r("div",J,[(l(),r(c,null,p(3,s=>t("div",{key:s,class:"flex items-start space-x-4 p-4 border-l-4 border-gray-200 animate-pulse"},[...e[10]||(e[10]=[t("div",{class:"h-10 w-10 bg-gray-200 rounded-full"},null,-1),t("div",{class:"flex-1"},[t("div",{class:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),t("div",{class:"h-3 bg-gray-200 rounded w-1/2"})],-1)])])),64))])):n.value.recentActivity&&n.value.recentActivity.length>0?(l(),r("div",K,[(l(!0),r(c,null,p(n.value.recentActivity,s=>(l(),r("div",{key:s.id,class:g(["flex items-start space-x-4 p-4 hover:bg-gray-50 rounded-lg transition-colors border-l-4",h(s.type)])},[t("div",{class:g(["p-2 rounded-full",w(s.type)])},[(l(),r("svg",{class:g(["w-6 h-6",f(s.type)]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...e[11]||(e[11]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"},null,-1)])],2))],2),t("div",Q,[t("h3",U,d(s.title),1),s.description?(l(),r("p",W,d(s.description),1)):V("",!0),t("p",X,d(x(s.created_at)),1)])],2))),128))])):(l(),r("div",Y," Nenhuma atividade recente "))])])}}});export{tt as default};
