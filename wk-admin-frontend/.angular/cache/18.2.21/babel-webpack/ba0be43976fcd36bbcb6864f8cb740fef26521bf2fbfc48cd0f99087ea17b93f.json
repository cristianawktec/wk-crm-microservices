{"ast":null,"code":"import { of, throwError } from 'rxjs';\nimport { catchError, tap } from 'rxjs/operators';\nimport { environment } from '../../environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport let ApiService = /*#__PURE__*/(() => {\n  class ApiService {\n    constructor(http) {\n      this.http = http;\n      this.base = environment.apiUrl || '/api';\n    }\n    getDashboard() {\n      return this.http.get(`${this.base}/dashboard`).pipe(catchError(err => {\n        console.warn('Dashboard API failed', err);\n        return throwError(() => err);\n      }));\n    }\n    getCustomers() {\n      return this.http.get(`${this.base}/customers`).pipe(catchError(err => {\n        console.warn('Customers API failed', err);\n        return throwError(() => err);\n      }));\n    }\n    getCustomer(id) {\n      console.log('[ApiService] getCustomer()', id);\n      return this.http.get(`${this.base}/customers/${id}`).pipe(tap(() => console.log('[ApiService] getCustomer() request sent for', id)), catchError(err => {\n        console.warn('getCustomer failed', err);\n        return throwError(() => err);\n      }));\n    }\n    createCustomer(payload) {\n      return this.http.post(`${this.base}/customers`, payload).pipe(catchError(err => {\n        console.warn('createCustomer failed', err);\n        return throwError(() => err);\n      }));\n    }\n    updateCustomer(id, payload) {\n      return this.http.put(`${this.base}/customers/${id}`, payload).pipe(catchError(err => {\n        console.warn('updateCustomer failed', err);\n        return throwError(() => err);\n      }));\n    }\n    deleteCustomer(id) {\n      return this.http.delete(`${this.base}/customers/${id}`).pipe(catchError(err => {\n        console.warn('deleteCustomer failed', err);\n        return throwError(() => err);\n      }));\n    }\n    /* Leads */\n    getLeads() {\n      return this.http.get(`${this.base}/leads`).pipe(catchError(err => {\n        console.warn('Leads API failed', err);\n        return throwError(() => err);\n      }));\n    }\n    getLead(id) {\n      console.log('[ApiService] getLead()', id);\n      return this.http.get(`${this.base}/leads/${id}`).pipe(tap(() => console.log('[ApiService] getLead() request sent for', id)), catchError(err => {\n        console.warn('getLead failed', err);\n        return throwError(() => err);\n      }));\n    }\n    createLead(payload) {\n      return this.http.post(`${this.base}/leads`, payload).pipe(catchError(err => {\n        console.warn('createLead failed', err);\n        return throwError(() => err);\n      }));\n    }\n    updateLead(id, payload) {\n      return this.http.put(`${this.base}/leads/${id}`, payload).pipe(catchError(err => {\n        console.warn('updateLead failed', err);\n        return throwError(() => err);\n      }));\n    }\n    deleteLead(id) {\n      return this.http.delete(`${this.base}/leads/${id}`).pipe(catchError(err => {\n        console.warn('deleteLead failed', err);\n        return throwError(() => err);\n      }));\n    }\n    // metadata for comboboxes\n    getLeadSources() {\n      return this.http.get(`${this.base}/leads/sources`).pipe(catchError(err => {\n        console.warn('getLeadSources failed', err);\n        return of([]);\n      }));\n    }\n    /* Sellers */\n    getSellers() {\n      return this.http.get(`${this.base}/sellers`).pipe(catchError(err => {\n        console.warn('Sellers API failed', err);\n        return throwError(() => err);\n      }));\n    }\n    getSeller(id) {\n      return this.http.get(`${this.base}/sellers/${id}`).pipe(catchError(err => {\n        console.warn('getSeller failed', err);\n        return throwError(() => err);\n      }));\n    }\n    createSeller(payload) {\n      return this.http.post(`${this.base}/sellers`, payload).pipe(catchError(err => {\n        console.warn('createSeller failed', err);\n        return throwError(() => err);\n      }));\n    }\n    updateSeller(id, payload) {\n      return this.http.put(`${this.base}/sellers/${id}`, payload).pipe(catchError(err => {\n        console.warn('updateSeller failed', err);\n        return throwError(() => err);\n      }));\n    }\n    deleteSeller(id) {\n      return this.http.delete(`${this.base}/sellers/${id}`).pipe(catchError(err => {\n        console.warn('deleteSeller failed', err);\n        return throwError(() => err);\n      }));\n    }\n    getSellerRoles() {\n      return this.http.get(`${this.base}/sellers/roles`).pipe(catchError(err => {\n        console.warn('getSellerRoles failed', err);\n        return of([]);\n      }));\n    }\n    /* Opportunities */\n    getOpportunities(params = {}) {\n      const qp = new URLSearchParams();\n      Object.keys(params || {}).forEach(k => qp.set(k, params[k]));\n      const url = `${this.base}/opportunities` + (qp.toString() ? `?${qp.toString()}` : '');\n      return this.http.get(url).pipe(catchError(err => {\n        console.warn('getOpportunities failed', err);\n        return throwError(() => err);\n      }));\n    }\n    getOpportunity(id) {\n      return this.http.get(`${this.base}/opportunities/${id}`).pipe(catchError(err => {\n        console.warn('getOpportunity failed', err);\n        return throwError(() => err);\n      }));\n    }\n    createOpportunity(payload) {\n      return this.http.post(`${this.base}/opportunities`, payload).pipe(catchError(err => {\n        console.warn('createOpportunity failed', err);\n        return throwError(() => err);\n      }));\n    }\n    updateOpportunity(id, payload) {\n      return this.http.put(`${this.base}/opportunities/${id}`, payload).pipe(catchError(err => {\n        console.warn('updateOpportunity failed', err);\n        return throwError(() => err);\n      }));\n    }\n    deleteOpportunity(id) {\n      return this.http.delete(`${this.base}/opportunities/${id}`).pipe(catchError(err => {\n        console.warn('deleteOpportunity failed', err);\n        return throwError(() => err);\n      }));\n    }\n    static {\n      this.ɵfac = function ApiService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || ApiService)(i0.ɵɵinject(i1.HttpClient));\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: ApiService,\n        factory: ApiService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return ApiService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}